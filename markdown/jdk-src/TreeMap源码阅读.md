# ThreadMap源码阅读







wiki: <https://zh.wikipedia.org/wiki/%E7%BA%A2%E9%BB%91%E6%A0%91>

	static final class Entry<K, V> implements Map.Entry<K, V> {
		K key;
		V value;
		Entry<K, V> left;
		Entry<K, V> right;
		Entry<K, V> parent;
		boolean color = BLACK;
		...
	}
Entry 成员变量有key，value，左子节点，右子节点和颜色（默认为黑色）。







public V put(K key, V value) ：

1. 如果root为空，则先设置root。

2. 不停的按树的结构寻找需要放key的Entry。

   2.1 如果数中有对应key的Entry，直接设置并返回。

   2.2 如果没有，则找到key对应的parent。

3. 新建key和value的Entry，加入到parent的子树中。

4. 执行fixAfterInsertion。

5. 设置size和modCount值。



private void fixAfterInsertion(Entry<K, V> x) ：

1. ​








































































































































































































